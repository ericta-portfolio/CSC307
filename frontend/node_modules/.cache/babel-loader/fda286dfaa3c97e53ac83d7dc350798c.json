{"ast":null,"code":"import _classCallCheck from \"/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/src/ImgUpload.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"antd/dist/antd.css\";\nimport { Avatar } from \"antd\";\nimport \"./styles.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar ImgUpload = /*#__PURE__*/function (_Component) {\n  _inherits(ImgUpload, _Component);\n\n  var _super = _createSuper(ImgUpload);\n\n  function ImgUpload() {\n    var _this;\n\n    _classCallCheck(this, ImgUpload);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.getUserData = function (idNum) {\n      var data = null;\n      axios.get(\"http://localhost:5000/getUser/\" + idNum).then(function (res) {\n        console.log(res);\n        data = res[\"data\"];\n        axios.get(\"http://localhost:5000/profile_pic_retrieve/\" + data[\"_id\"]).then(function (res) {\n          console.log(res);\n\n          _this.setState({\n            profileImage: res[\"data\"]\n          });\n\n          console.log(res[\"data\"]);\n        });\n        console.log(\"This is the state:\");\n        console.log(_this.state.data);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.state = {\n      profileImage: \"\",\n      selectedFile: null\n    };\n\n    _this.fileSelectedHandler = function (event) {\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n\n      console.log(event.target.files[0]);\n    };\n\n    _this.fileUploadHandler = function () {\n      var data = null;\n      var id = localStorage.getItem(\"id\");\n      axios.get(\"http://localhost:5000/getUser/\" + id).then(function (res) {\n        console.log(res);\n        data = res[\"data\"];\n        console.log(data);\n        var fd = new FormData();\n        fd.append(\"image\", _this.state.selectedFile, _this.state.selectedFile.name); //needs to send an http request\n\n        axios.put(\"http://localhost:5000/profile_pic_upload/\" + data[\"_id\"], fd, {\n          onUploadProgress: function onUploadProgress(progressEvent) {\n            console.log(\"Upload Progress:\" + Math.round(progressEvent.loaded / progressEvent.total * 100) + \"%\");\n          }\n        }).then(function (res) {\n          console.log(res);\n          axios.get(\"http://localhost:5000/profile_pic_retrieve/\" + data[\"_id\"]).then(function (res) {\n            console.log(res);\n\n            _this.setState({\n              profileImage: res[\"data\"]\n            });\n\n            console.log(res[\"data\"]);\n            return res[\"data\"];\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (e) {\n        //Not handling the error. Just logging into the console.\n        console.log(e);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ImgUpload, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [this.state.profileImage == \"\" ? this.getUserData(localStorage.getItem(\"id\")) : \"\", /*#__PURE__*/_jsxDEV(Avatar, {\n          className: \"moveImg\",\n          style: {\n            \"margin-top\": \"5px\"\n          },\n          size: 350,\n          icon: \"img\",\n          src: this.state.profileImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"profileimgupload\",\n          type: \"file\",\n          onChange: this.fileSelectedHandler,\n          ref: function ref(fileInput) {\n            return _this2.fileInput = fileInput;\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"uploadimg\",\n          className: \"btn2 upload\",\n          onClick: this.fileUploadHandler,\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return ImgUpload;\n}(Component);\n\nexport default ImgUpload;","map":{"version":3,"sources":["/Users/lesiqueiira/Documents/GitHub/CSC308-PolySnaps/frontend/src/ImgUpload.jsx"],"names":["React","Component","axios","Avatar","ImgUpload","getUserData","idNum","data","get","then","res","console","log","setState","profileImage","state","catch","error","selectedFile","fileSelectedHandler","event","target","files","fileUploadHandler","id","localStorage","getItem","fd","FormData","append","name","put","onUploadProgress","progressEvent","Math","round","loaded","total","e","fileInput"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport \"antd/dist/antd.css\";\nimport { Avatar } from \"antd\";\nimport \"./styles.css\";\n\nclass ImgUpload extends Component {\n  // talk to prof... this is duplicate code!\n  getUserData = (idNum) => {\n    var data = null;\n    axios\n      .get(\"http://localhost:5000/getUser/\" + idNum)\n      .then((res) => {\n        console.log(res);\n        data = res[\"data\"];\n        axios\n          .get(\"http://localhost:5000/profile_pic_retrieve/\" + data[\"_id\"])\n          .then((res) => {\n            console.log(res);\n            this.setState({\n              profileImage: res[\"data\"],\n            });\n            console.log(res[\"data\"]);\n          });\n        console.log(\"This is the state:\");\n        console.log(this.state.data);\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  state = {\n    profileImage: \"\",\n    selectedFile: null,\n  };\n\n  fileSelectedHandler = (event) => {\n    this.setState({ selectedFile: event.target.files[0] });\n    console.log(event.target.files[0]);\n  };\n\n  fileUploadHandler = () => {\n    var data = null;\n    const id = localStorage.getItem(\"id\");\n    axios\n      .get(\"http://localhost:5000/getUser/\" + id)\n      .then((res) => {\n        console.log(res);\n        data = res[\"data\"];\n        console.log(data);\n\n        const fd = new FormData();\n        fd.append(\n          \"image\",\n          this.state.selectedFile,\n          this.state.selectedFile.name\n        );\n        //needs to send an http request\n        axios\n          .put(\"http://localhost:5000/profile_pic_upload/\" + data[\"_id\"], fd, {\n            onUploadProgress: (progressEvent) => {\n              console.log(\n                \"Upload Progress:\" +\n                  Math.round(\n                    (progressEvent.loaded / progressEvent.total) * 100\n                  ) +\n                  \"%\"\n              );\n            },\n          })\n          .then((res) => {\n            console.log(res);\n            axios\n              .get(\"http://localhost:5000/profile_pic_retrieve/\" + data[\"_id\"])\n              .then((res) => {\n                console.log(res);\n                this.setState({\n                  profileImage: res[\"data\"],\n                });\n                console.log(res[\"data\"]);\n                return res[\"data\"];\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          })\n          .catch(function (error) {\n            console.log(error);\n          });\n      })\n      .catch(function (e) {\n        //Not handling the error. Just logging into the console.\n        console.log(e);\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        {this.state.profileImage == \"\"\n          ? this.getUserData(localStorage.getItem(\"id\"))\n          : \"\"}\n        <Avatar\n          className=\"moveImg\"\n          style={{ \"margin-top\": \"5px\" }}\n          size={350}\n          icon=\"img\"\n          src={this.state.profileImage}\n        />\n        <input\n          id=\"profileimgupload\"\n          type=\"file\"\n          onChange={this.fileSelectedHandler}\n          ref={(fileInput) => (this.fileInput = fileInput)}\n        />\n        <button\n          id=\"uploadimg\"\n          className=\"btn2 upload\"\n          onClick={this.fileUploadHandler}\n        >\n          Upload\n        </button>\n        <div></div>\n      </div>\n    );\n  }\n}\n\nexport default ImgUpload;\n"]},"metadata":{},"sourceType":"module"}